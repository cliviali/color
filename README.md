'''
#作者：黎盛强  日期：2023/07/16  
#名称：安慰剂预测模型数据前处理
#简介：传统模型的输入输出是以颗粒颜色和色素配方两组模型互为映射，构建出一个色素配方和颗粒颜色的模型；
#  但是前期研究发现单纯的BP模型预测能力较差，原因主要是一下几方面：
    1、数据量较小-受实验影响，大量实验费事费力，导致实验数据较少。
    2、颗粒颜色测量误差，色差仪测量颗粒存在误差。猜测与颗粒粒度有关。
    3、颗粒制备时其它因素影响。不同人员操作、色素分散不均匀、色素溶液溶度差异等
    4、通过单一色素染色发现，颗粒颜色随色素添加量的增加颜色先快速加深，之后加深趋势降低最后趋近零。表现色素对颗粒的上色存在极值
    5、通过前期BP拟合发现预测模型在低浓度范围表现较好，但在高浓度表现下预测效果极低，甚至会出现超出颜色空间范围的现象。猜测可能
         是因为在如上原因4导致，在大浓度范围里，实验数据会放大原因3出现的误差，具体浓度-颜色曲线在末端范围会出现反复横跳的现象从而
         影响实验数据集
    6、实验数据集质量低，因为以上5个方面影响导致实验数据偏移，导致预测模型差。

# 目前改善思路：
    1、对模型进行修改：
      1) 改变模型结构和输入输出；
          现已知A,B两点的位置信息，
          包括该点的颜色参数{[La 、Aa 、 Ba ] ,[Lb 、Ab 、 Bb ]}色素配方{[Ya 、 Ra 、 Ba],[Yb 、 Rb 、 Bb]} ；
          变换得 {[La 、Aa 、 Ba 、Lb 、Ab 、 Bb], [Yb - Ya 、Rb -Ra 、 Bb - Ba]}
          将[La 、Aa 、 Ba 、Lb 、Ab 、 Bb]作为模型输入，[Yb - Ya 、Rb -Ra 、 Bb - Ba]作为模型输出；
          将此前数据集两两组合、变换，如此我们将可以拓展训练数据集，假设之前有n条训练集变换完之后拓展为 n*(n + 1)/2条。
          这样可改变训练数据少的问题。
      2）引入先验经验；
          改变先前直接预测色素配方的方式，如1所述模型输入可看作输入两个颜色坐标，得到他们之间相差的色素配方。
          因此将数据库中已知的配方颜色作为输入的一部分，未知配方颜色作为输入的另一部分，得到他们之间相差的配方量。
          在已知配方颜色选择方面，引入聚类算法，计算数据库中与未知配方颜色相似的一系类配方。
          选择的已知数据与被预测数据越相近，预测数据可靠性越高。
          输入[ L已知 、A已知、 B已知、 L未知 、A未知 、 B未知 ]；得到输出[Y , R , B ]。
          计算得未知颗粒的色素配方为[Y + Y已知 ,R + R已知 ,B + B已知]
          综上操作将已知数据作为输入，可以保留一部原始数据的真实性，从而优化预测降低误差。
    2、对实验修改：
      1）对实验数据选点修改
          训练数据的范围对模型有较大影响，有论文表示较小的范围训练的模型精确度更高；
          结合中药颗粒的的实际情况，其颜色范围多分散在黄色色系为主的范围内。
          因此在模型论证的初步实验中可将训练集的制备设计在黄色色系之内，从而减少工作量；'''
# color
